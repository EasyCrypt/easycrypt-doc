% --------------------------------------------------------------------
\input{easycrypt-common.tex}
\usepackage{nicefrac}

% --------------------------------------------------------------------
\usepackage[draft,silent,targetlayout=plain,layout=inline]{fixme}

\newcommand{\fix}[1]{\fxnote{#1}}

% --------------------------------------------------------------------
\DeclareMathVersion{sans}
\SetSymbolFont{operators}{sans}{OT1}{cmbr}{m}{n}
\SetSymbolFont{letters}{sans}{OML}{cmbrm}{m}{it}
\SetSymbolFont{symbols}{sans}{OMS}{cmbrs}{m}{n}
\SetMathAlphabet{\mathit}{sans}{OT1}{cmbr}{m}{sl}
\SetMathAlphabet{\mathbf}{sans}{OT1}{cmbr}{bx}{n}
\SetMathAlphabet{\mathtt}{sans}{OT1}{cmtl}{m}{n}
\SetSymbolFont{largesymbols}{sans}{OMX}{iwona}{m}{n}

%--------------------------------------------------------------------
\usepackage{xifthen}
\usepackage{xstring}
\usepackage{colortbl}

\newcommand{\domark}{%
  \vbox to 0pt{\kern-\dp\strutbox \smash{\llap{$\circledcirc$\kern1em}} \vss}}
\newcommand{\impmark}{\strut\vadjust{\domark}}

\newenvironment{tactic}[2][\empty]{%
\setlength{\parindent}{0pt}
\trivlist{}{}\item\relax%
\hrule width \hsize \kern .5mm \hrule width \hsize height 1pt \kern -.2mm
\index{tactics}{#2}%
\label{tactic-#2}%
\impmark\ifx\empty#1\ec{#2}\else\ec{#1}\fi\strut
\hrule width \hsize \kern 1.5mm}
{\endtrivlist}

\newenvironment{tsyntax}[2][plain]
{\IfStrEq{#1}{plain}{\textbf{Syntax:} \ec{#2}.}{
 \IfStrEq{#1}{empty}{\relax}{\errmessage{invalid tsyntax mode: #1}}}}
{\par\addvspace{.5\baselineskip}}

\newcommand{\texample}[4][]{%
\begin{array}{@{}lr@{}}
 \text{#2} & \text{\ifthenelse{\isempty{#1}}{}{\small [#1]}}\\
 \arrayrulecolor{gray}\hline\\[-.5em]
 \multicolumn{2}{c}{\hspace{.5cm}\inferrule*{#3}{#4}}
\end{array}}

\newcommand{\rtactic}[2][\empty]{\ec{#2} (p.~\pageref{tactic-\ifx\empty#1#2\else#1\fi})}

% --------------------------------------------------------------------
\newcommand{\inv}{^{-1}}
\newcommand{\invrel}[1]{#1\inv}

%--------------------------------------------------------------------
\newcommand{\tint}[0]{\ensuremath{\mathsf{int}}}
\newcommand{\tbool}[0]{\ensuremath{\mathsf{bool}}}
